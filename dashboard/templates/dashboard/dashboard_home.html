{% extends 'core/base.html' %}

{% block title %}Dashboard | {{ user.username }}{% endblock %}

{% block content %}
<style>
    .dashboard-header {
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        margin-bottom: 30px;
        border-left: 5px solid #2563eb;
    }
    .book-table {
        width: 100%;
        border-collapse: collapse;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
    }
    .book-table th {
        background: #f1f5f9;
        color: #475569;
        text-align: left;
        padding: 15px;
        font-weight: 600;
    }
    .book-table td {
        padding: 15px;
        border-bottom: 1px solid #f1f5f9;
    }
    .status-badge {
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 700;
        background: #dcfce7;
        color: #166534;
    }
</style>

<div class="dashboard-header">
    <h1>Welcome, {{ user.username|capfirst }}</h1>
    <p>Email: {{ user.email }} | Phone: {{ user.phone|default:"Not provided" }}</p>
</div>

<h2 style="margin-bottom: 20px; color: #1e293b;">My Issued Books</h2>

<table class="book-table">
    <thead>
        <tr>
            <th>Book Title</th>
            <th>Category</th>
            <th>Author</th>
            <th>Issue Date</th>
            <th>Return Date</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for item in my_books %}
        <tr>
           <td><strong>{{ item.book.book_title }}</strong></td>
        <td>{{ item.book.book_category.cat_name }}</td>
        <td>{{ item.book.book_author.auth_name }}</td>
        <td>{{ item.issue_date|date:"M d, Y" }}</td>
        <td>{{ item.return_date|date:"M d, Y" }}</td>
        <td><span class="status-badge">Active</span></td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5" style="text-align: center; color: #94a3b8; padding: 40px;">
                You haven't issued any books yet. 
                <br>
                <a href="{% url 'books:book_list'  %}" style="color: #2563eb;">Browse Library</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}